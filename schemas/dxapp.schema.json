{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "DNAnexus App Metadata",
  "type": "object",
  "required": [
    "name",
    "title",
    "summary",
    "dxapi",
    "version",
    "inputSpec",
    "outputSpec",
    "runSpec",
    "developers",
    "authorizedUsers",
    "regionalOptions"
  ],
  "properties": {
    "name": {
      "type": "string",
      "description": "Unique identifier for the app (e.g. 'my-app'). No spaces allowed.",
      "markdownDescription": "**App Name**  \nUnique identifier for the app. Use lowercase letters, numbers, and underscores only. Example: `my_app`.",
      "additionalProperties": false
    },
    "title": {
      "type": "string",
      "description": "Human readable name shown in the UI.",
      "markdownDescription": "**Title**  \nHuman readable name for the app, shown in the DNAnexus UI.",
      "additionalProperties": false
    },
    "summary": {
      "type": "string",
      "description": "Short summary of the app's functionality.",
      "markdownDescription": "**Summary**  \nShort summary describing the app's main purpose.",
      "additionalProperties": false
    },
    "description": {
      "type": "string",
      "description": "Detailed description of the app, its features, and usage notes.",
      "markdownDescription": "**Description**  \nDetailed description of the app, its features, and any important usage notes.",
      "additionalProperties": false
    },
    "dxapi": {
      "type": "string",
      "description": "DNAnexus API version required by the app.",
      "markdownDescription": "**dxAPI**  \nDNAnexus API version required by the app. Example: `1.0.0`.",
      "additionalProperties": false
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic versioning (e.g. 0.0.1).",
      "markdownDescription": "**Version**  \nSemantic versioning for the app, e.g., `1.0.0`. Update this field whenever you make changes to the app.",
      "additionalProperties": false
    },
    "openSource": {
      "type": "boolean",
      "description": "Indicates if the app is open source.",
      "markdownDescription": "**Open Source**  \nSet to `true` if the app is open source.",
      "additionalProperties": false
    },
    "httpsApp": {
      "type": "boolean",
      "description": "Indicates if the app is an HTTPS web app.",
      "markdownDescription": "**HTTPS App**  \nSet to `true` if the app is an HTTPS web app.",
      "additionalProperties": false
    },
    "inputSpec": {
      "type": "array",
      "description": "Defines the input parameters for the app.",
      "markdownDescription": "**Input Specification**  \nDefines the input parameters for the app.",
      "items": {
        "type": "object",
        "required": [
          "name",
          "class"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the input parameter.",
            "markdownDescription": "**Input Name**  \nName of the input parameter."
          },
          "class": {
            "type": "string",
            "enum": [
              "int",
              "float",
              "string",
              "boolean",
              "hash",
              "record",
              "file",
              "applet",
              "array:int",
              "array:float",
              "array:string",
              "array:boolean",
              "array:record",
              "array:file",
              "array:applet"
            ],
            "description": "Data type of the input parameter.",
            "markdownDescription": "**Input Class**  \nData type of the input parameter.",
            "markdownEnumDescriptions": [
              "`int`: Integer value.",
              "`float`: Floating point value.",
              "`string`: String value.",
              "`boolean`: Boolean value (true/false).",
              "`hash`: Key-value object.",
              "`record`: DNAnexus record object.",
              "`file`: DNAnexus file object.",
              "`applet`: DNAnexus applet object.",
              "`array:int`: Array of integers.",
              "`array:float`: Array of floats.",
              "`array:string`: Array of strings.",
              "`array:boolean`: Array of booleans.",
              "`array:record`: Array of record objects.",
              "`array:file`: Array of file objects.",
              "`array:applet`: Array of applet objects."
            ]
          },
          "optional": {
            "type": "boolean",
            "description": "Whether the input parameter is optional.",
            "markdownDescription": "**Optional**  \nSet to `true` if the input parameter is optional."
          },
          "label": {
            "type": "string",
            "description": "Label for the input parameter.",
            "markdownDescription": "**Label**  \nLabel for the input parameter."
          },
          "default": {
            "description": "Default value for the input parameter.",
            "markdownDescription": "**Default**  \nDefault value for the input parameter."
          },
          "patterns": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Patterns to validate the input parameter.",
            "markdownDescription": "**Patterns**  \nPatterns to validate the input parameter."
          },
          "help": {
            "type": "string",
            "description": "Help text for the input parameter.",
            "markdownDescription": "**Help**  \nHelp text for the input parameter."
          }
        },
        "additionalProperties": false
      },
      "additionalProperties": false
    },
    "outputSpec": {
      "type": "array",
      "description": "Defines the output parameters for the app.",
      "markdownDescription": "**Output Specification**  \nDefines the output parameters for the app.",
      "items": {
        "type": "object",
        "required": [
          "name",
          "class"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the output parameter.",
            "markdownDescription": "**Output Name**  \nName of the output parameter."
          },
          "class": {
            "type": "string",
            "enum": [
              "int",
              "float",
              "string",
              "boolean",
              "hash",
              "record",
              "file",
              "applet",
              "array:int",
              "array:float",
              "array:string",
              "array:boolean",
              "array:record",
              "array:file",
              "array:applet"
            ],
            "description": "Data type of the output parameter.",
            "markdownDescription": "**Output Class**  \nData type of the output parameter.",
            "markdownEnumDescriptions": [
              "`int`: Integer value.",
              "`float`: Floating point value.",
              "`string`: String value.",
              "`boolean`: Boolean value (true/false).",
              "`hash`: Key-value object.",
              "`record`: DNAnexus record object.",
              "`file`: DNAnexus file object.",
              "`applet`: DNAnexus applet object.",
              "`array:int`: Array of integers.",
              "`array:float`: Array of floats.",
              "`array:string`: Array of strings.",
              "`array:boolean`: Array of booleans.",
              "`array:record`: Array of record objects.",
              "`array:file`: Array of file objects.",
              "`array:applet`: Array of applet objects."
            ]
          },
          "label": {
            "type": "string",
            "description": "Label for the output parameter.",
            "markdownDescription": "**Label**  \nLabel for the output parameter."
          },
          "patterns": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Patterns to validate the output parameter.",
            "markdownDescription": "**Patterns**  \nPatterns to validate the output parameter."
          },
          "help": {
            "type": "string",
            "description": "Help text for the output parameter.",
            "markdownDescription": "**Help**  \nHelp text for the output parameter."
          }
        },
        "additionalProperties": false
      },
      "additionalProperties": false
    },
    "runSpec": {
      "type": "object",
      "description": "Defines how the app is executed, including interpreter, entry point, OS, dependencies, and more.",
      "markdownDescription": "**Run Specification**  \nDefines how the app is executed, including interpreter, entry point, OS, dependencies, and more.",
      "required": [
        "interpreter",
        "file",
        "distribution",
        "release"
      ],
      "properties": {
        "assetDepends": {
          "$ref": "./assetDepends.schema.json",
          "description": "List of asset dependencies required by the app.",
          "markdownDescription": "**Asset Dependencies**  \nList of asset dependencies required by the app. Each item must specify either an `id` (string) or a combination of `name`, `project`, and `version` (all strings). Optionally, `folder` (string) can be included."
        },
        "systemRequirements": {
          "type": "object",
          "description": "System requirements for the app (deprecated, use 'regionalOptions' instead).",
          "markdownDescription": "**System Requirements**  \nSystem requirements for the app.",
          "deprecationMessage": "This property is deprecated. Use 'regionalOptions.regionName.systemRequirements' instead for region-specific system requirements.",
          "additionalProperties": false
        },
        "interpreter": {
          "type": "string",
          "enum": [
            "bash",
            "python3"
          ],
          "description": "The language interpreter to use for running the app.",
          "markdownDescription": "**Interpreter**  \nThe language interpreter to use for running the app.",
          "markdownEnumDescriptions": [
            "Bash shell interpreter.",
            "Python 3 interpreter."
          ]
        },
        "file": {
          "type": "string",
          "description": "Entry point script filename.",
          "markdownDescription": "**File**  \nEntry point script filename for the app."
        },
        "distribution": {
          "type": "string",
          "enum": [
            "Ubuntu"
          ],
          "description": "OS Distribution.",
          "markdownDescription": "**Distribution**  \nOperating system distribution for the app. Only `Ubuntu` is supported.",
          "markdownEnumDescriptions": [
            "The only supported OS distribution for DNAnexus apps."
          ]
        },
        "release": {
          "type": "string",
          "enum": [
            "24.04",
            "20.04",
            "16.04",
            "14.04",
            "12.04"
          ],
          "description": "Ubuntu release version.",
          "markdownDescription": "**Release**  \nUbuntu release version for the app.",
          "markdownEnumDescriptions": [
            "Ubuntu 24.04 LTS (latest supported release).",
            "Ubuntu 20.04 LTS.",
            "Ubuntu 16.04 LTS.",
            "Ubuntu 14.04 LTS.",
            "Ubuntu 12.04 LTS."
          ]
        },
        "execDepends": {
          "$ref": "./execDepends.schema.json",
          "markdownDescription": "**execDepends**  \nList of software dependencies required by the app. See execDepends.schema.json for details."
        },
        "timeoutPolicy": {
          "type": "object",
          "description": "Timeout policy for app execution. Keys can be entry point names or '*' for all. Each value is an object with keys like 'minutes' or 'hours'.",
          "markdownDescription": "**Timeout Policy**  \nTimeout policy for app execution. Use '*' for all entry points, or specify entry point names. Each value is an object with keys like 'minutes' or 'hours'.",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "minutes": {
                "type": "number",
                "description": "Timeout in minutes.",
                "markdownDescription": "**Minutes**  \nTimeout in minutes."
              },
              "hours": {
                "type": "number",
                "description": "Timeout in hours.",
                "markdownDescription": "**Hours**  \nTimeout in hours."
              }
            },
            "additionalProperties": false
          }
        },
        "version": {
          "type": "string",
          "description": "Version of the run specification.",
          "markdownDescription": "**RunSpec Version**  \nVersion of the run specification."
        }
      },
      "additionalProperties": false
    },
    "developers": {
      "type": "array",
      "description": "List of developer usernames for the app.",
      "markdownDescription": "**Developers**  \nList of developer usernames for the app.",
      "items": {
        "type": "string"
      },
      "additionalProperties": false
    },
    "authorizedUsers": {
      "type": "array",
      "description": "List of authorized user IDs for the app.",
      "markdownDescription": "**Authorized Users**  \nList of authorized user IDs for the app.",
      "items": {
        "type": "string"
      },
      "additionalProperties": false
    },
    "regionalOptions": {
      "type": "object",
      "description": "Region-specific options for app execution.",
      "markdownDescription": "**Regional Options**  \nRegion-specific options for app execution. Keys must be valid DNAnexus region names.",
      "propertyNames": {
        "enum": [
          "aws:us-east-1",
          "aws:eu-central-1",
          "aws:eu-west-2",
          "aws:eu-west-2-g",
          "aws:me-south-1",
          "aws:ap-southeast-2",
          "azure:westus",
          "azure:westeurope",
          "azure:uksouth-ofh",
          "oci:us-ashburn-1"
        ],
        "markdownEnumDescriptions": [
          "AWS US (East)",
          "AWS Europe (Frankfurt)",
          "AWS UKB-RAP (London)",
          "AWS Europe (London)",
          "AWS Middle East (Bahrain)",
          "AWS Asia Pacific (Sydney)",
          "Azure West US",
          "Azure West Europe",
          "Azure UK South OFH",
          "OCI US (Ashburn)"
        ]
      },
      "patternProperties": {
        "^aws:": {
          "type": "object",
          "properties": {
            "systemRequirements": {
              "type": "object",
              "description": "System requirements for this AWS region. Keys are entry point names or '*' for all entry points.",
              "markdownDescription": "**System Requirements**  \nSystem requirements for this AWS region. Keys are entry point names or `*` for all entry points. Each value is an object with properties like `instanceType`.",
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "instanceType": {
                    "$ref": "./instanceTypes.aws.all.schema.json",
                    "description": "Instance type for this entry point. Choose from standard AWS, GPU, or FPGA instance types.",
                    "markdownDescription": "**Instance Type**  \nInstance type for this entry point. Choose from standard AWS, GPU, or FPGA instance types."
                  }
                },
                "additionalProperties": false
              }
            },
            "bundledDepends": {
              "type": "array",
              "description": "Bundled dependencies for this region.",
              "markdownDescription": "**Bundled Dependencies**  \nBundled dependencies for this region. Each item specifies a name and a DNAnexus link to the file.",
              "items": {
                "type": "object",
                "required": ["name", "id"],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Name of the bundled dependency file.",
                    "markdownDescription": "**Name**  \nFilename of the bundled dependency."
                  },
                  "id": {
                    "$ref": "./dnanexusLink.schema.json",
                    "description": "DNAnexus link to the file.",
                    "markdownDescription": "**ID**  \nDNAnexus link pointing to the file. Use `{\"$dnanexus_link\": \"file-xxx\"}` or `{\"$dnanexus_link\": {\"id\": \"file-xxx\", \"project\": \"project-yyy\"}}`."
                  }
                },
                "additionalProperties": false
              }
            },
            "assetDepends": {
              "$ref": "./assetDepends.schema.json",
              "description": "Asset dependencies for this region.",
              "markdownDescription": "**Asset Dependencies**  \nAsset dependencies specific to this region. Overrides or supplements the global assetDepends."
            },
            "resources": {
              "oneOf": [
                {
                  "type": "string",
                  "description": "Project ID or file ID for resources in this region."
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "description": "File ID for a resource."
                  }
                }
              ],
              "description": "Resources colocated with this region. Can be a project ID or array of file IDs.",
              "markdownDescription": "**Resources**  \nResources colocated with this region. Supply a project ID (string) or array of file IDs that are specific to this region."
            }
          },
          "additionalProperties": false
        },
        "^azure:": {
          "type": "object",
          "properties": {
            "systemRequirements": {
              "type": "object",
              "description": "System requirements for this Azure region. Keys are entry point names or '*' for all entry points.",
              "markdownDescription": "**System Requirements**  \nSystem requirements for this Azure region. Keys are entry point names or `*` for all entry points. Each value is an object with properties like `instanceType`.",
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "instanceType": {
                    "$ref": "./instanceTypes.azure.all.schema.json",
                    "description": "Instance type for this entry point. Choose from standard Azure or GPU instance types.",
                    "markdownDescription": "**Instance Type**  \nInstance type for this entry point. Choose from standard Azure or GPU instance types."
                  }
                },
                "additionalProperties": false
              }
            },
            "bundledDepends": {
              "type": "array",
              "description": "Bundled dependencies for this region.",
              "markdownDescription": "**Bundled Dependencies**  \nBundled dependencies for this region. Each item specifies a name and a DNAnexus link to the file.",
              "items": {
                "type": "object",
                "required": ["name", "id"],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Name of the bundled dependency file.",
                    "markdownDescription": "**Name**  \nFilename of the bundled dependency."
                  },
                  "id": {
                    "$ref": "./dnanexusLink.schema.json",
                    "description": "DNAnexus link to the file.",
                    "markdownDescription": "**ID**  \nDNAnexus link pointing to the file. Use `{\"$dnanexus_link\": \"file-xxx\"}` or `{\"$dnanexus_link\": {\"id\": \"file-xxx\", \"project\": \"project-yyy\"}}`."
                  }
                },
                "additionalProperties": false
              }
            },
            "assetDepends": {
              "$ref": "./assetDepends.schema.json",
              "description": "Asset dependencies for this region.",
              "markdownDescription": "**Asset Dependencies**  \nAsset dependencies specific to this region. Overrides or supplements the global assetDepends."
            },
            "resources": {
              "oneOf": [
                {
                  "type": "string",
                  "description": "Project ID or file ID for resources in this region."
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "description": "File ID for a resource."
                  }
                }
              ],
              "description": "Resources colocated with this region. Can be a project ID or array of file IDs.",
              "markdownDescription": "**Resources**  \nResources colocated with this region. Supply a project ID (string) or array of file IDs that are specific to this region."
            }
          },
          "additionalProperties": false
        },
        "^oci:": {
          "type": "object",
          "properties": {
            "systemRequirements": {
              "type": "object",
              "description": "System requirements for this OCI region. Keys are entry point names or '*' for all entry points.",
              "markdownDescription": "**System Requirements**  \nSystem requirements for this OCI region. Keys are entry point names or `*` for all entry points. Each value is an object with properties like `instanceType`.",
              "additionalProperties": {
                "type": "object",
                "properties": {
                  "instanceType": {
                    "$ref": "./instanceTypes.oci.all.schema.json",
                    "description": "Instance type for this entry point. Choose from standard OCI or GPU instance types.",
                    "markdownDescription": "**Instance Type**  \nInstance type for this entry point. Choose from standard OCI or GPU instance types."
                  }
                },
                "additionalProperties": false
              }
            },
            "bundledDepends": {
              "type": "array",
              "description": "Bundled dependencies for this region.",
              "markdownDescription": "**Bundled Dependencies**  \nBundled dependencies for this region. Each item specifies a name and a DNAnexus link to the file.",
              "items": {
                "type": "object",
                "required": ["name", "id"],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Name of the bundled dependency file.",
                    "markdownDescription": "**Name**  \nFilename of the bundled dependency."
                  },
                  "id": {
                    "$ref": "./dnanexusLink.schema.json",
                    "description": "DNAnexus link to the file.",
                    "markdownDescription": "**ID**  \nDNAnexus link pointing to the file. Use `{\"$dnanexus_link\": \"file-xxx\"}` or `{\"$dnanexus_link\": {\"id\": \"file-xxx\", \"project\": \"project-yyy\"}}`."
                  }
                },
                "additionalProperties": false
              }
            },
            "assetDepends": {
              "$ref": "./assetDepends.schema.json",
              "description": "Asset dependencies for this region.",
              "markdownDescription": "**Asset Dependencies**  \nAsset dependencies specific to this region. Overrides or supplements the global assetDepends."
            },
            "resources": {
              "oneOf": [
                {
                  "type": "string",
                  "description": "Project ID or file ID for resources in this region."
                },
                {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "description": "File ID for a resource."
                  }
                }
              ],
              "description": "Resources colocated with this region. Can be a project ID or array of file IDs.",
              "markdownDescription": "**Resources**  \nResources colocated with this region. Supply a project ID (string) or array of file IDs that are specific to this region."
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "details": {
      "description": "Additional details for the app.",
      "markdownDescription": "**Details**  \nAdditional details for the app."
    },
    "categories": {
      "type": "array",
      "description": "Categories for the app.",
      "markdownDescription": "**Categories**  \nCategories for the app.",
      "items": {
        "type": "string"
      },
      "additionalProperties": false
    },
    "access": {
      "type": "object",
      "description": "Access control settings for the app.",
      "markdownDescription": "**Access**  \nAccess control settings for the app.",
      "additionalProperties": false
    },
    "ignoreReuse": {
      "type": "boolean",
      "description": "If true, disables reuse of previous results.",
      "markdownDescription": "**Ignore Reuse**  \nIf true, disables reuse of previous results.",
      "additionalProperties": false
    },
    "treeTurnaroundTimeThreshold": {
      "type": "number",
      "description": "Threshold for tree turnaround time in seconds.",
      "markdownDescription": "**Tree Turnaround Time Threshold (in seconds)**  \nFor a root execution, the turnaround time is the time between its creation time and the time it reaches the [terminal state](https://documentation.dnanexus.com/user/running-apps-and-workflows/job-lifecycle) (or the current time if it is not in a terminal state). The terminal states of an execution are `done`, `terminated`, and `failed`.",
      "additionalProperties": false
    },
    "billing": {
      "type": "string",
      "description": "Billing information for the app.",
      "markdownDescription": "**Billing**  \nBilling information for the app.",
      "additionalProperties": false
    },
    "resources": {
      "oneOf": [
        {
          "type": "string",
          "description": "Resource file or directory."
        },
        {
          "type": "array",
          "items": {
            "type": "string",
            "description": "Resource file or directory."
          }
        }
      ],
      "description": "Resource files or directories required by the app (deprecated, use 'regionalOptions' instead).",
      "markdownDescription": "**Resources**  \nResource files or directories required by the app. **Deprecated:** Use 'regionalOptions' for region-specific resources.",
      "deprecationMessage": "This property is deprecated. Use 'regionalOptions' for region-specific resources."
    }
  },
  "additionalProperties": false
}